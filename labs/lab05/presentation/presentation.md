---
## Front matter
lang: ru-RU
title: "Лабораторная работа №5" 
subtitle: "Сетевые технологии"
author:
  - Андреева С.В.
institute:
  - Группа НПИбд-01-23
  - Российский университет дружбы народов, Москва, Россия

## i18n babel
babel-lang: russian
babel-otherlangs: english

## Formatting pdf
toc: false
toc-title: Содержание
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
 - '\makeatletter'
 - '\beamer@ignorenonframefalse'
 - '\makeatother'

## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
---

# Информация

## Докладчик

:::::::::::::: {.columns align=center}
::: {.column width="70%"}

  * Андреева Софья Владимировна
  * Группа НПИбд-01-23
  * Российский университет дружбы народов


:::
::: {.column width="30%"}


:::
::::::::::::::

# Вводная часть


## Цель работы

Построение простейших моделей сети на базе коммутатора и маршрутизаторов FRR и VyOS в GNS3, анализ трафика посредством Wireshark.

# Выполнение лабораторной работы

## Моделирование простейшей сети на базе коммутатора в GNS3

Запустим GNS3 VM и GNS3 и создадим новый проект. В рабочей области GNS3 разместим коммутатор Ethernet и два VPCS. Щёлкнув
на устройстве правой кнопкой мыши в меню Configure изменим название устройства, включив в имя устройства имя своей учётной записи. Коммутатору присвоим название msk-svandreeva-sw-01. Затем соединим VPCS с коммутатором и отобразим обозначение интерфейсов соединения

## Выполнение лабораторной работы

![Добавление устройств и изменение их имен Соединение VPCS с коммутатором](image/1.png){#fig:001 width=70%}

## Выполнение лабораторной работы

Зададим IP-адреса VPCS. Для этого с помощью меню, вызываемого правой кнопкой мыши, запуститм Start, PC-1, затем вызовим его терминал Console. Для просмотра синтаксиса возможных для ввода команд наберем /?

## Выполнение лабораторной работы

![Параметры импорта](image/3.png){#fig:003 width=70%}


## Выполнение лабораторной работы

Для задания IP-адреса 192.168.1.11 в сети 192.168.1.0/24 введем:

```
ip 192.168.1.11/24 192.168.1.1
```
А для сохранения конфигураций введём команду save.

## Выполнение лабораторной работы

![Задание IP-адреса PC1-svandreeva](image/4.png){#fig:004 width=70%}

## Выполнение лабораторной работы

Те же действия продоелаем для второго VPCS

![Задание IP-адреса PC2-svandreeva](image/5.png){#fig:005 width=55%}

## Выполнение лабораторной работы

Проверим работоспособность соединения между PC-1 и PC-2 с помощью команды ping.В конце остановим в проекте все узлы(меню GNS3 Control Stop all nodes).

![Проверка соединения между PC-1 и PC-2 ](image/6.png){#fig:006 width=60%}


## Анализ трафика в GNS3 посредством Wireshark

Запустим на соединении между PC-1 и коммутатором анализатор трафика. Для этого щёлкним правой кнопкой мыши на соединении, выберем в меню Start capture

![Запуск анализатора трафика](image/7.png){#fig:007 width=60%}

## Выполнение лабораторной работы

Запустился Wireshark, а в проекте GNS3 на соединении появился значок 

![ARP пакеты](image/8.png){#fig:008 width=60%}

## Выполнение лабораторной работы

В проекте GNS3 стартуем все узлы (меню GNS3 Control Start/Resume all nodes). В окне Wireshark отобразилась информация по протоколу ARP. 
Изучим запрос и ответ ARP в программе Wireshark. В обоих случаях длина кадра равняется 64 байт. В начале сформировались запросы безвоздмездных пакетов ARP для PC-1(в этом случае источник -- Private_66:68:00, а пункт назначения - Broadcast) и для PC-2(в этом случае источник -- Private_66:68:01, а пункт назначения - Broadcast). Затем был сформирован запрос от PC-2 на передачу MAC-адоеса PC-1 и получен ответ - MAC-адрес.

## Выполнение лабораторной работы

![ARP пакеты](image/9.png){#fig:009 width=70%}

## Выполнение лабораторной работы

В терминале PC-2 посмотрим информацию по опциям команды ping, введя ping /?. Затем сделаем один эхо-запрос в ICMP-моде к узлу PC-1. Изучим эхо-запрос и эхо-ответ ICMP в программе Wireshark. В обоих случаях длина кадра равняется 98 байт. В случае эхо-запроса точка назначения – PC-1, а источник – PC-2, в случае же эхо-ответа – наоборот.

## Выполнение лабораторной работы

![Эхо-запрос в ICMP-моде](image/10.png){#fig:010 width=70%} 

## Выполнение лабораторной работы

![ICMP пакеты](image/11.png){#fig:011 width=70%} 

## Выполнение лабораторной работы

Сделаем один эхо-запрос в UDP-моде к узлу PC-1. В окне Wireshark
проанализируем полученную информацию.  В обоих случаях длина кадра равняется 98 байт. В случае эхо-запроса точка назначения – PC-1, а источник – PC-2, в случае же эхо-ответа – наоборот.

## Выполнение лабораторной работы

![Эхо-запрос в UDP-моде](image/12.png){#fig:012 width=70%}

## Выполнение лабораторной работы

![UDP пакеты](image/13.png){#fig:013 width=70%}

## Выполнение лабораторной работы

Сделаем один эхо-запрос в TCP-моде к узлу PC-1. В окне Wireshark проанализируем полученную информацию. Порт источника задан случайно равен 35487, порт назначения равен 7. В случае ответа порты заданы наоборот. Также можно увидеть handshake протокола TCP. В первом пакете установлен бит SYN(Syn: set). Во втором пакете установлены биты SYN и ACK(Syn: set, Acknowldgment: set). А в следующем пакете установлен бит ACK(Acknowldgment: set). Также есть пакеты с битом FIN, завершающим handshake.

## Выполнение лабораторной работы

![Эхо-запрос в TCP-моде](image/14.png){#fig:014 width=70%}

## Выполнение лабораторной работы

![TCP пакеты](image/15.png){#fig:015 width=70%}

## Моделирование простейшей сети на базе маршрутизатора FRR в GNS3

Запустим GNS3 VM и GNS3. Создадим новый проект.
В рабочей области GNS3 разместим VPCS, коммутатор Ethernet и маршрутизатор FRR. Изменим отображаемые названия устройств. Включим захват трафика на соединении между коммутатором и маршрутизатором. Затем запустим все устройства проекта. Откроем консоль всех устройств проекта.

## Выполнение лабораторной работы

![Рабочая область](image/16.png){#fig:016 width=70%}

## Выполнение лабораторной работы

![Захват трафика](image/17.png){#fig:017 width=70%}

## Выполнение лабораторной работы

Настроим IP-адресацию для интерфейса узла PC1:

![Настройка IP-адресации для интерфейса узла PC-1](image/19.png){#fig:019 width=70%}

## Выполнение лабораторной работы

Настроим IP-адресацию для интерфейса локальной сети маршрутизатора:

![Настройка IP-адресации для интерфейса локальной сети маршрутизатора](image/20.png){#fig:020 width=70%}

## Выполнение лабораторной работы

Проверим конфигурацию маршрутизатора и настройки IP-адресации:

![Проверка конфигурации маршрутизатора и настройки IP-адресации](image/21.png){#fig:021 width=70%}

## Выполнение лабораторной работы

Проверим подключение. Узел PC1 успешно отправлять эхо-запросы ICMP на адрес маршрутизатора 192.168.1.1

![Проверка подключения](image/22.png){#fig:022 width=70%}

## Выполнение лабораторной работы

В окне Wireshark проанализируем полученную информацию. Было отпрвлено 10 пакетов формата ICMP. В эхо-запросе источником является IP-адрес PC-1, а пунтком назначения -- IP-адрес шлюза марщрутизатора. В эхо-ответе -- наоборот. Также были сформированы ARP пакеты запрашивающий MAC-адрес шлюза маршрутизатора перед пингованием его и сообщающий этот MAC-адреc PC-1, а затем запрашивающие MAC-адрес PC-1 и сообщающие его шлюзу.

## Выполнение лабораторной работы

![Анализ информации в Wireshark](image/23.png){#fig:023 width=70%}


## Моделирование простейшей сети на базе маршрутизатора VyOS в GNS3

Запустим GNS3 VM и GNS3. Создадим новый проект.В рабочей области GNS3 разместим VPCS, коммутатор Ethernet и маршрутизатор VyOS.
Изменим отображаемые названия устройств. Включим захват трафика на соединении между коммутатором и маршрутизатором. Запустим все устройства проекта. Откройте консоль всех устройств проекта.

## Выполнение лабораторной работы

![Захват трафика на соединении между коммутатором и маршрутизатором](image/24.png){#fig:024 width=70%}

## Выполнение лабораторной работы

Настроим IP-адресацию для интерфейса узла PC1.

![Настройка IP-адресации для интерфейса узла PC-1](image/25.png){#fig:025 width=70%}

## Выполнение лабораторной работы

Настроим маршрутизатор VyOS. После загрузки введем логин vyos и пароль vyos: В рабочем режиме в командной строке отображается символ $. Перейдем в режим конфигурирования с помощью команды `configure`. Изменим имя устройства с помощью команды `set system host-name msk-svandreeva-gw-01`.
Изменения в имени устройства вступят в силу после применения и сохранения конфигурации и перезапуска устройства.
Затем зададим IP-адрес на интерфейсе eth0. Но так как на моем устройстве уже был установлен dhcp адрес, то сначала я удалила его, а затем установила адрес IPv4.   Также просмотрим внесённые в конфигурацию изменения, применим эти изменения и сохраним. В конце выйдем из режима конфигурирования

## Выполнение лабораторной работы

![Режим конфигурации маршрутизатора VyOS](image/28.png){#fig:028 width=70%}

## Выполнение лабораторной работы

![Режим конфигурации маршрутизатора VyOS](image/26.png){#fig:026 width=70%}

## Выполнение лабораторной работы

![Режим конфигурации маршрутизатора VyOS](image/30.png){#fig:030 width=70%}

## Выполнение лабораторной работы

Проверим подключение. Узел PC1 дуспешно отправлять эхо-запросы на адрес маршрутизатора 192.168.1.1

![Проверка соединения](image/27.png){#fig:027 width=70%}

## Выполнение лабораторной работы

В окне Wireshark проанализируйте полученную информацию. Было отправлены пакеты ICMP. В эхо-запросе источником является IP-адрес PC-1, а пунтком назначения -- IP-адрес шлюза марщрутизатора. В эхо-ответе -- наоборот. Также были сформированы ARP пакеты запрашивающий MAC-адрес шлюза маршрутизатора перед пингованием его и сообщающий этот MAC-адреc PC-1, а затем запрашивающие MAC-адрес PC-1 и сообщающие его шлюзу.

## Выполнение лабораторной работы

![Анализ трафика Wireshark](image/28.png){#fig:028 width=70%}


## Выводы

В результате выполнения лабораторной работы были построены простейшие модели сети на базе коммутатора и маршрутизаторов FRR и VyOS в GNS3, а также проанализирован трафик посредством Wireshark.


